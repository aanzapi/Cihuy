<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Stalk API Premium</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="min-h-screen bg-gradient-to-br from-indigo-600 via-purple-600 to-pink-500 flex items-center justify-center p-6">
  <div class="bg-white/90 backdrop-blur-xl rounded-2xl shadow-2xl w-full max-w-2xl p-8">
    <h1 class="text-4xl font-extrabold text-center text-indigo-700">üîç Stalk API</h1>
    <p class="text-center text-slate-600 mt-2">Masukkan data sesuai service yang dipilih</p>

    <!-- Pilihan service -->
    <div class="mt-6">
      <label class="block text-sm font-semibold text-slate-700">Pilih Service</label>
      <select id="service" class="mt-2 w-full rounded-xl border-gray-300 p-3 shadow-sm focus:ring-indigo-500 focus:border-indigo-500">
        <option value="ff">Free Fire (ID)</option>
        <option value="tiktok">TikTok (Username)</option>
        <option value="roblox">Roblox (Username)</option>
      </select>
    </div>

    <!-- Input username / id -->
    <div class="mt-6">
      <label id="inputLabel" class="block text-sm font-semibold text-slate-700">Masukkan ID</label>
      <input id="inputValue" type="text" placeholder="contoh: 123456789"
        class="mt-2 w-full rounded-xl border-gray-300 p-3 shadow-sm focus:ring-indigo-500 focus:border-indigo-500"/>
    </div>

    <!-- Tombol -->
    <div class="flex justify-center gap-4 mt-6">
      <button onclick="callApi()"
        class="px-6 py-3 rounded-xl bg-indigo-600 text-white font-semibold shadow-md hover:bg-indigo-700 transition">
        Call API
      </button>
      <button onclick="resetForm()"
        class="px-6 py-3 rounded-xl bg-gray-200 text-slate-700 font-semibold shadow-md hover:bg-gray-300 transition">
        Reset
      </button>
    </div>

    <!-- Hasil -->
    <div class="mt-8">
      <h2 class="text-lg font-bold text-slate-800">Response</h2>
      <pre id="response"
        class="mt-3 min-h-[160px] max-h-96 overflow-auto bg-slate-900 text-green-300 text-sm p-4 rounded-xl shadow-inner whitespace-pre-wrap">
Belum ada response...
      </pre>
    </div>
  </div>

  <script>
    const serviceEl = document.getElementById("service");
    const inputLabel = document.getElementById("inputLabel");
    const inputValue = document.getElementById("inputValue");
    const responseEl = document.getElementById("response");

    const ENDPOINTS = {
      ff: "https://api.sxtream.xyz/stalk/ffstalk",
      tiktok: "https://api.sxtream.xyz/stalk/tiktokstalk",
      roblox: "https://api.sxtream.xyz/stalk/roblox"
    };

    // Ubah label sesuai service
    serviceEl.addEventListener("change", () => {
      if (serviceEl.value === "ff") {
        inputLabel.textContent = "Masukkan ID Free Fire";
        inputValue.placeholder = "contoh: 123456789";
      } else if (serviceEl.value === "tiktok") {
        inputLabel.textContent = "Masukkan Username TikTok";
        inputValue.placeholder = "contoh: tiktokuser";
      } else if (serviceEl.value === "roblox") {
        inputLabel.textContent = "Masukkan Username Roblox";
        inputValue.placeholder = "contoh: robloxuser";
      }
    });

    async function callApi() {
      const service = serviceEl.value;
      const input = inputValue.value.trim();
      let url = ENDPOINTS[service];

      if (!input) {
        responseEl.textContent = "‚ùå Harap isi input terlebih dahulu!";
        return;
      }

      // Susun query sesuai service
      if (service === "ff") url += `?id=${encodeURIComponent(input)}`;
      if (service === "tiktok") url += `?username=${encodeURIComponent(input)}`;
      if (service === "roblox") url += `?username=${encodeURIComponent(input)}`;

      responseEl.textContent = "‚è≥ Loading...";

      try {
        const res = await fetch(url);
        const type = res.headers.get("content-type") || "";
        let data;
        if (type.includes("application/json")) data = await res.json();
        else data = await res.text();

        if (!res.ok) {
          responseEl.textContent = `‚ùå Error ${res.status}\\n${JSON.stringify(data, null, 2)}`;
        } else {
          responseEl.textContent = JSON.stringify(data, null, 2);
        }
      } catch (err) {
        responseEl.textContent = "‚ö†Ô∏è Fetch error: " + err.message;
      }
    }

    function resetForm() {
      inputValue.value = "";
      responseEl.textContent = "Belum ada response...";
    }
  </script>
</body>
</html>
